# generator-moment-it

## What is this git repository ? 

This git repository is the result of researches about [Yeoman](https://yeoman.io/).

Yeoman is a scaffolding tool that can generate repository from templates and variables.

In this repository you will find two templates :

- [`ansible-role`](./generators/ansible-role) : Create a default file tree to create an ansible role with good practices
- [`terraform-module`](./generators/terraform-module) : Create a default file tree to create a Terraform module with good practices


## How to create repository content from these templates ?

First, if you didn't do it, you need to install yeoman :

```
npm install -g yo
```

Then you need to install this repository as a npm package :

```
npm install -g https://github.com/le-moment-it/generator-moment-it.git
```

You are good to go ! You can now create your repository :

```
yo moment-it:<templateOfYourChoice>
```

For example :

```
yo moment-it:ansible-role
```

## Examples

These are examples of repository generated by this repository templates :

- ansible-role : [linux-generated](https://github.com/le-moment-it/linux-generated/tree/develop)
- terraform-module: [terraform-aws-generated](https://github.com/le-moment-it/terraform-aws-generated/tree/develop)

## Creation of Github repsitory

In these templates, you can also create the Github repository. To be able to create the Github repository, you need to have a valid Github PAT (Personal Authentication Token) saved in the environment variable `GITHUB_TOKEN`

```
const octokit = new Octokit({
    auth: process.env.GITHUB_TOKEN,
});
```

## Automatic Push to remote

In these templates, you can also push directly the code on remote branches :

- An empty commit to create the `main` branch
- The commit with all generated files in the `develop` branch

To do that, you need to be able to push your code using SSH authentication.

```
this.spawnCommandSync('git', ['remote', 'add', 'origin', "git@github.com:" + this.github_user + "/" + this.name + ".git"]);
```


## One more thing ...

This workflow and this example are the results of researches done on my Twitch channel : [@le_moment_it](https://www.twitch.tv/le_moment_it) . 

If you want to support me for free, you can follow the channel and join us for more IT research !

We live every Tuesday and Thursday at 15h PM (UTC+1).

To finish, we also have a discord where we share IT news and articles. You can join us here : [le_moment_it](https://discord.gg/Bn66XZsWfn)